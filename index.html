<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0,
                   maximum-scale=1.0, user-scalable=no">
    <title>CSA Evaluation Planning</title>
  
    <style>
        * { box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        
        body{ 
            background-color: #fff; 
            margin: 8px; 
            display: flex; 
            justify-content: center; 
            padding: 20px;
            color: #333;
      }

        .container { 
            width: 100%; 
            max-width: 500px;
            padding: 30px;
            border: 5px solid #eee;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
        }

        h2 { text-align: center; font-size: 20px; margin-bottom: 20px; color: #007bff; border-bottom: 2px solid #007bff; padding-bottom: 10px; }
        h3 { font-size: 16px; margin-top: 25px; color: #555; border-left: 4px solid #007bff; padding-left: 10px; }

        .input-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: 600; font-size: 14px; color: #666; }

        input { 
            width: 100%; 
            padding: 12px; 
            border: 2px solid #f0f0f0; 
            border-radius: 8px; 
            font-size: 16px; 
            outline: none;
            background-color: #fcfcfc;
        }

        input:focus { border-color: #007bff; background-color: #fff; }
        input[readonly] { background-color: #e9ecef; color: #495057; cursor: not-allowed; border-color: #dee2e6; }
        
        .highlight-result { background-color: #E6E6FA !important; border-color: #D3D3D3 !important; font-weight: bold; color: #856404 !important; }
      
      /* ‡∏ï‡∏±‡∏ß‡∏´‡∏∏‡πâ‡∏°‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• */
.input-suffix {
    position: relative;
    display: flex;
    align-items: center;
}

.input-suffix input {
    width: 100%;
    padding-right: 30px; /* ‡πÄ‡∏ß‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏ß‡∏≤‡πÑ‡∏ß‡πâ‡πÉ‡∏´‡πâ % */
}

/* ‡∏ï‡∏±‡∏ß‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢ % */
.suffix-symbol {
    position: absolute;
    right: 10px;
    color: #666;
    font-weight: bold;
    pointer-events: none; /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏°‡∏≤‡∏™‡πå‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏∞‡∏•‡∏∏‡πÑ‡∏õ‡∏ó‡∏µ‡πà input ‡πÑ‡∏î‡πâ */
}

/* ‡∏ã‡πà‡∏≠‡∏ô‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå % ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏≠‡∏∞‡πÑ‡∏£ (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏ß‡πà‡∏≤‡∏ä‡∏≠‡∏ö‡πÅ‡∏ö‡∏ö‡πÑ‡∏´‡∏ô) */
.input-suffix input:placeholder-shown + .suffix-symbol {
    display: none;
}
      
    </style>
</head>
<body>

<div class="container">
  
<div style="display: flex; justify-content: flex-end; gap: 8px; margin-bottom: 8px;">
    <button type="button"
            onclick="changeLanguage('th')" 
            style="padding: 6px 10px; background-color: #f8f9fa; border: 1px solid #ddd; border-radius: 8px; cursor: pointer; font-size: 14px; display: flex; align-items: center;">
        üáπüá≠
    </button>
    <button type="button"
            onclick="changeLanguage('en')" 
            style="padding: 6px 10px; background-color: #f8f9fa; border: 1px solid #ddd; border-radius: 8px; cursor: pointer; font-size: 14px; display: flex; align-items: center;">
        üá∫üá∏
    </button>
    <button type="button"
            onclick="changeLanguage('vn')" 
            style="padding: 6px 10px; background-color: #f8f9fa; border: 1px solid #ddd; border-radius: 8px; cursor: pointer; font-size: 14px; display: flex; align-items: center;">
        üáªüá≥
    </button>
   <button type="button"
           onclick="changeLanguage('la')" 
           style="padding: 6px 10px; background-color: #f8f9fa; border: 1px solid #ddd; border-radius: 8px;
                  cursor: pointer; font-size: 14px; display: flex; align-items: center;">üá±üá¶
</button>
</div>

    <h2 style="margin: 10; font-size: 25px; color: #007bff;
                 align-items: center">CSA Evaluation Planning</h2>
    <div style="display: flex; gap: 10px; align-items: center;">
    <div style="display: flex; justify-content: flex-end; gap: 8px; margin-bottom: 15px;">
    <div style="display: flex; justify-content: flex-end; gap: 8px; margin-bottom: 15px;">
    <button type="button"
            onclick="resetForm()" 
            style="padding: 6px 10px; background-color: #ff4d4d; color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 14px; display: flex; align-items: center; gap: 5px;">
        üóëÔ∏è
    </button>
    <button type="button"
            onclick="scrollToBottom()" 
            style="padding: 6px 12px; background-color: #28a745; color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 14px; display: flex; align-items: center; gap: 5px;">
        ‚¨áÔ∏è
    </button>
      </div>
    </div>
</div>
  
    <h3 class="lang-text"
        data-key="header1">1. ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</h3>
    <div class="input-group">
        <label class="lang-text"
               data-key="sam_label">‡πÄ‡∏ß‡∏•‡∏≤‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô (‡∏ô‡∏≤‡∏ó‡∏µ)</label>
        <input type="number"
               id="samInput"
               inputmode="decimal"
               step="0.00001"
               placeholder="SAM"
               oninput="calculateAll()">
    </div>
  
    <div class="input-group">
    <label class="lang-text" data-key="eff_target">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û (%)</label>
    <div class="input-suffix">
        <input type="number"
               id="effTargetInput"
               inputmode="numeric"
               placeholder="Eff"
               oninput="calculateAll()">
        <span class="suffix-symbol">%</span>
    </div>
</div>  
  
    <div class="input-group">
        <label class="lang-text"
               data-key="qty_label">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ä‡∏¥‡πâ‡∏ô‡∏á‡∏≤‡∏ô (‡∏ä‡∏¥‡πâ‡∏ô/‡∏ä‡∏°.)</label>
        <input type="number"
               id="targetDisplay"
               readonly>
    </div>
    
    <hr>
    
    <div class="actual-section">
    <h3 class="lang-text"
        data-key="header2">2. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á</h3>
      
      <div class="stopwatch-container" style="text-align: center; background: #f8f9fa; padding: 15px; border-radius: 10px; margin-bottom: 20px; border: 1px dashed #ccc;">
    <div id="display" style="font-size: 2rem; font-weight: bold; margin-bottom: 10px; color: #333;">00:00</div>
    
    <div class="stopwatch-controls">
        <button type="button" id="startStopBtn" onclick="startStop()" style="background: #28a745; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer;">Start</button>
        <button type="button" onclick="resetTimer()" style="background: #6c757d; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer;">Reset</button>
        <button type="button" onclick="recordTime()" style="background: #007bff; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer;">üíæ Save</button>
    </div>
</div>
      
            <div class="input-group">
            <label class="lang-text"
                   data-key="total_min">‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏ô‡∏≤‡∏ó‡∏µ)</label>
            <input type="number"
                   id="totalMin"
                   inputmode="numeric"
                   placeholder=""
                   oninput="calculateAll()">
        </div>

          <div class="input-group">
            <label class="lang-text"
                   data-key="total_sec">‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)</label>
            <input type="number"
                   id="totalTime"
                   inputmode="numeric"
                   placeholder=""
                   oninput="calculateAll()">
        </div>
      
        <div class="input-group">
            <label class="lang-text"
                   data-key="total_count">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÑ‡∏î‡πâ (‡∏£‡∏≠‡∏ö)</label>
            <input type="number"
                   id="totalCount"
                   inputmode="numeric"
                   placeholder=""
                   oninput="calculateAll()">
        </div>

        <div class="input-group">
        <label class="lang-text"
               data-key="avg_timesec">‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡πà‡∏≠‡∏£‡∏≠‡∏ö‡∏à‡∏£‡∏¥‡∏á (‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)</label>
      <input type="text"
             id="avgTimeSec"
             readonly class="highlight-result">
        </div>

        <div class="input-group">
          <label class="lang-text"
                 data-key="avg_timemin">‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡πà‡∏≠‡∏£‡∏≠‡∏ö‡∏à‡∏£‡∏¥‡∏á (‡∏ô‡∏≤‡∏ó‡∏µ)</label>
          <input type="text"
                 id="avgTimeMin"
                 readonly class="highlight-result">
        </div>

        <div class="input-group">
          <label class="lang-text"
                 data-key="actual_eff">‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏à‡∏£‡∏¥‡∏á (%)</label>
          
            <input type="text"
                   id="actualEffPerc"
                   readonly class="highlight-result">
        </div>

        <div class="input-group">
          <label class="lang-text"
                 data-key="actual_pcs">‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏à‡∏£‡∏¥‡∏á (‡∏ä‡∏¥‡πâ‡∏ô/‡∏ä‡∏°.)</label>
          
            <input type="text"
                   id="actualPcs"
                   readonly class="highlight-result">
        </div>

        <hr>
        
        <div class="quality-section">
        <h3 class="lang-text"
            data-key="header3">3. ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û</h3>
          
        <div class="input-group">
          <label class="lang-text"
                 data-key="pass_qty">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà "‡∏ú‡πà‡∏≤‡∏ô" (‡∏ä‡∏¥‡πâ‡∏ô)</label>
            <input type="number"
                   id="passQty"
                   inputmode="numeric"
                   placeholder=""
                   oninput="calculateAll()">
        </div>
        
        <div class="input-group">
          <label class="lang-text"
                 data-key="fail_qty">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà "‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô" (‡∏ä‡∏¥‡πâ‡∏ô)</label>
            <input type="number"
                   id="failQty"
                   inputmode="numeric"
                   placeholder=""
                   oninput="calculateAll()">
        </div>

        <div class="input-group">
          <label class="lang-text"
                 data-key="pass_rate">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡∏ú‡πà‡∏≤‡∏ô (%)</label>
            <input type="text" 
                   id="passRate"
                   readonly class="highlight-result">
        </div>
          
         <hr>
        
        <div class="eff-section">
          <h3 id="header4" class="lang-text"data-key="header4">4. ‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å</h3>
     
        
        <div class="input-group">
            <label class="lang-text"
                   data-key="training_duration">‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å (‡∏ß‡∏±‡∏ô/‡∏ä‡∏°)</label>
            <input type="number"
                   id="duration"
                   inputmode="numeric"
                   placeholder=""
                   oninput="calculateAll()">
        </div>

        <div class="input-group">
            <label class="lang-text"data-key="d_1">‡∏ß‡∏±‡∏ô/‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ó‡∏µ‡πà 1</label>
            <input type="text" 
                   id="d1"
                   readonly class="highlight-result">
        </div>
        <div class="input-group">
            <label>‡∏ß‡∏±‡∏ô/‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ó‡∏µ‡πà 2</label>
            <input type="text" 
                   id="d2"
                   readonly class="highlight-result">
        </div>
        <div class="input-group">
            <label>‡∏ß‡∏±‡∏ô/‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ó‡∏µ‡πà 3</label>
            <input type="text" 
                   id="d3"
                   readonly class="highlight-result">
        </div>
              <div class="input-group">
            <label>‡∏ß‡∏±‡∏ô/‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ó‡∏µ‡πà 4</label>
            <input type="text" 
                   id="d4"
                   readonly class="highlight-result">
        </div>
              <div class="input-group">
            <label>‡∏ß‡∏±‡∏ô/‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ó‡∏µ‡πà 5</label>
            <input type="text" 
                   id="d5"
                   readonly class="highlight-result">
        </div>
              <div class="input-group">
            <label>‡∏ß‡∏±‡∏ô/‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ó‡∏µ‡πà 6</label>
            <input type="text" 
                   id="d6"
                   readonly class="highlight-result">
        </div>
              <div class="input-group">
            <label>‡∏ß‡∏±‡∏ô/‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ó‡∏µ‡πà 7</label>
            <input type="text" 
                   id="d7"
                   readonly class="highlight-result">
        </div>
 
              <div class="input-group">
            <label>‡∏ß‡∏±‡∏ô/‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ó‡∏µ‡πà 8</label>
            <input type="text" 
                   id="d8"
                   readonly class="highlight-result">
        </div>
              <div class="input-group">
            <label>‡∏ß‡∏±‡∏ô/‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ó‡∏µ‡πà 9</label>
            <input type="text" 
                   id="d9"
                   readonly class="highlight-result">
        </div>
              <div class="input-group">
            <label>‡∏ß‡∏±‡∏ô/‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ó‡∏µ‡πà 10</label>
            <input type="text" 
                   id="d10"
                   readonly class="highlight-result">
        </div>
              <div class="input-group">
            <label>‡∏ß‡∏±‡∏ô/‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ó‡∏µ‡πà 11</label>
            <input type="text" 
                   id="d11"
                   readonly class="highlight-result">
        </div>
              <div class="input-group">
            <label>‡∏ß‡∏±‡∏ô/‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ó‡∏µ‡πà 12</label>
            <input type="text" 
                   id="d12"
                   readonly class="highlight-result">
        </div>
              <div class="input-group">
            <label>‡∏ß‡∏±‡∏ô/‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ó‡∏µ‡πà 13</label>
            <input type="text" 
                   id="d13"
                   readonly class="highlight-result">
        </div>
              <div class="input-group">
            <label>‡∏ß‡∏±‡∏ô/‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ó‡∏µ‡πà 14</label>
            <input type="text" 
                   id="d14"
                   readonly class="highlight-result">
        </div>
              <div class="input-group">
            <label>‡∏ß‡∏±‡∏ô/‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ó‡∏µ‡πà 15</label>
            <input type="text" 
                   id="d15"
                   readonly class="highlight-result">
        </div>
              <div class="input-group">
            <label>‡∏ß‡∏±‡∏ô/‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ó‡∏µ‡πà 16</label>
            <input type="text" 
                   id="d16"
                   readonly class="highlight-result">
        </div>
              <div class="input-group">
            <label>‡∏ß‡∏±‡∏ô/‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ó‡∏µ‡πà 17</label>
            <input type="text" 
                   id="d17"
                   readonly class="highlight-result">
        </div>
              <div class="input-group">
            <label>‡∏ß‡∏±‡∏ô/‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ó‡∏µ‡πà 18</label>
            <input type="text" 
                   id="d18"
                   readonly class="highlight-result">
        </div>
    </div>
</div>

<script>
let startTime; // ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏î Start
let elapsedTime = 0; // ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏õ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏¥‡∏•‡∏•‡∏¥‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
let timerInterval;
let isRunning = false;

function startStop() {
    const btn = document.getElementById('startStopBtn');
    if (!isRunning) {
        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤
        isRunning = true;
        btn.innerText = "Stop";
        btn.style.background = "#dc3545";
        
        // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏´‡∏°‡πà ‡πÇ‡∏î‡∏¢‡∏´‡∏±‡∏Å‡∏•‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏¢‡∏´‡∏¢‡∏∏‡∏î‡πÑ‡∏ß‡πâ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
        startTime = Date.now() - elapsedTime;
        
        // ‡∏£‡∏±‡∏ô updateDisplay ‡∏ñ‡∏µ‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏•‡∏∑‡πà‡∏ô‡πÑ‡∏´‡∏• (‡πÄ‡∏ä‡πà‡∏ô ‡∏ó‡∏∏‡∏Å‡πÜ 100ms) ‡πÅ‡∏ï‡πà‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô
        timerInterval = setInterval(updateDisplay, 1000);
    } else {
        // ‡∏´‡∏¢‡∏∏‡∏î
        isRunning = false;
        btn.innerText = "Continue";
        btn.style.background = "#28a745";
        clearInterval(timerInterval);
    }
}

function updateDisplay() {
    // ‡∏´‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á "‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ" ‡∏Å‡∏±‡∏ö "‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°"
    elapsedTime = Date.now() - startTime;
    
    // ‡πÅ‡∏õ‡∏•‡∏á ‡∏°‡∏¥‡∏•‡∏•‡∏¥‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡πÄ‡∏õ‡πá‡∏ô ‡∏ô‡∏≤‡∏ó‡∏µ ‡πÅ‡∏•‡∏∞ ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
    const totalSeconds = Math.floor(elapsedTime / 1000);
    const mins = Math.floor(totalSeconds / 60);
    const secs = totalSeconds % 60;
    
    // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
    document.getElementById('display').innerText = 
        `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
}

function resetTimer() {
    isRunning = false;
    clearInterval(timerInterval);
    elapsedTime = 0;
    document.getElementById('display').innerText = "00:00";
    document.getElementById('startStopBtn').innerText = "Start";
    document.getElementById('startStopBtn').style.background = "#28a745";
}

function recordTime() {
    const totalSeconds = Math.floor(elapsedTime / 1000);
    const mins = Math.floor(totalSeconds / 60);
    const secs = totalSeconds % 60;

    // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á‡πÉ‡∏ô Input ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
    document.getElementById('totalMin').value = mins;
    document.getElementById('totalTime').value = secs;

    // ‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
    if (typeof calculateAll === "function") {
        calculateAll();
    }
}
  
// 1. ‡∏Ñ‡∏•‡∏±‡∏á‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå 2 ‡∏†‡∏≤‡∏©‡∏≤
const translations = {
    'th': {
        // ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
        'header1': '1. ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢',
        'sam_label': '‡∏Ñ‡πà‡∏≤ SAM (‡∏ô‡∏≤‡∏ó‡∏µ)',
        'eff_target': '‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û (%)',
        'qty_label': '‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ä‡∏¥‡πâ‡∏ô‡∏á‡∏≤‡∏ô (‡∏ä‡∏¥‡πâ‡∏ô/‡∏ä‡∏°.)',

        // ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á
        'header2': '2. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á',
        'total_min': '‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏ô‡∏≤‡∏ó‡∏µ)',
        'total_sec': '‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)',
        'total_count': '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÑ‡∏î‡πâ (‡∏£‡∏≠‡∏ö)',
        'avg_timesec': '‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡πà‡∏≠‡∏£‡∏≠‡∏ö‡∏à‡∏£‡∏¥‡∏á (‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)',
        'avg_timemin': '‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡πà‡∏≠‡∏£‡∏≠‡∏ö‡∏à‡∏£‡∏¥‡∏á (‡∏ô‡∏≤‡∏ó‡∏µ)',
        'actual_eff': '‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏à‡∏£‡∏¥‡∏á (%)',
        'actual_pcs': '‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏à‡∏£‡∏¥‡∏á (‡∏ä‡∏¥‡πâ‡∏ô/‡∏ä‡∏°.)',

        // ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û
        'header3': '3. ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û',
        'pass_qty': '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà "‡∏ú‡πà‡∏≤‡∏ô" (‡∏ä‡∏¥‡πâ‡∏ô)',
        'fail_qty': '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà "‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô" (‡∏ä‡∏¥‡πâ‡∏ô)',
        'pass_rate': '‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡∏ú‡πà‡∏≤‡∏ô (%)',
      
         // ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 4: ‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å
        'header4': '4. ‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å',
        'training_duration': '‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å (‡∏ß‡∏±‡∏ô/‡∏ä‡∏°)'
    },
    'en': {
        'header1': '1. Set Target',
        'sam_label': 'SAM Value (Minutes)',
        'eff_target': 'Target Efficiency (%)',
        'qty_label': 'Target Cut Piece (pcs/hrs.)',

        'header2': '2. Record Actual Results',
        'total_min': 'Total Time (Minutes)',
        'total_sec': 'Total Time (Seconds)',
        'total_count': 'Total Cycles (Rounds)',
        'avg_timesec': 'Actual Cycle Time (Seconds)',
        'avg_timemin': 'Actual Cycle Time (Minutes)',
        'actual_eff': 'Actual Efficiency (%)',
        'actual_pcs': 'Actual Efficiency (Pieces/Hour)',

        'header3': '3. Quality',
        'pass_qty': 'Passed Qty (Pcs)',
        'fail_qty': 'Failed Qty (Pcs)',
        'pass_rate': 'Pass rate (%)',
            
        'header4': '4. Training Plan',
        'training_duration': 'Training duration (days/hours)'
    },
    'vn': {
        'header1': '1. Thi·∫øt l·∫≠p m·ª•c ti√™u',
        'sam_label': 'Gi√° tr·ªã SAM (Ph√∫t)',
        'eff_target': 'Hi·ªáu su·∫•t m·ª•c ti√™u (%)',
        'qty_label': 'S·ªë l∆∞·ª£ng s·∫£n ph·∫©m m·ª•c ti√™u m·ªói gi·ªù',

        'header2': '2. Ghi l·∫°i k·∫øt qu·∫£ th·ª±c t·∫ø',
        'total_min': 'T·ªïng th·ªùi gian (Ph√∫t)',
        'total_sec': 'T·ªïng th·ªùi gian (Gi√¢y)',
        'total_count': 'S·ªë l·∫ßn (V√≤ng)',
        'avg_timesec': 'Th·ªùi gian v√≤ng th·ª±c t·∫ø (Gi√¢y)',
        'avg_timemin': 'Th·ªùi gian v√≤ng th·ª±c t·∫ø (Ph√∫t)',
        'actual_eff': 'Hi·ªáu su·∫•t th·ª±c t·∫ø (%)',
        'actual_pcs': 'Hi·ªáu su·∫•t th·ª±c t·∫ø (S·∫£n ph·∫©m/Gi·ªù)',

        'header3': '3. Ch·∫•t l∆∞·ª£ng',
        'pass_qty': 'S·ªë l∆∞·ª£ng ƒë·∫°t ti√™u chu·∫©n (C√°i)',
        'fail_qty': 'S·ªë l∆∞·ª£ng kh√¥ng ƒë·∫°t ti√™u chu·∫©n (C√°i)',
        'pass_rate': 'T·ª∑ l·ªá ƒë·∫≠u (%)',
        
        'header4': '4. K·∫ø ho·∫°ch ƒë√†o t·∫°o',
        'training_duration': 'Th·ªùi l∆∞·ª£ng ƒë√†o t·∫°o (ng√†y/gi·ªù)'
    },
    'la': {
        'header1': '1. ‡∫Å‡∫≤‡∫ô‡∫Å‡∫≥‡∫ô‡∫ª‡∫î‡ªÄ‡∫õ‡∫ª‡ªâ‡∫≤‡ªù‡∫≤‡∫ç',
        'sam_label': '‡∫Ñ‡ªà‡∫≤ SAM (‡∫ô‡∫≤‡∫ó‡∫µ)',
        'eff_target': '‡ªÄ‡∫õ‡∫ª‡ªâ‡∫≤‡ªù‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô‡∫õ‡∫∞‡∫ï‡∫¥‡∫ö‡∫±‡∫î (%)',
        'qty_label': '‡∫à‡∫≥‡∫ô‡∫ß‡∫ô‡ªÄ‡∫õ‡∫ª‡ªâ‡∫≤‡ªù‡∫≤‡∫ç‡∫Ç‡∫≠‡∫á‡∫ä‡∫¥‡ªâ‡∫ô‡∫™‡ªà‡∫ß‡∫ô‡∫ï‡ªç‡ªà‡∫ä‡∫ª‡ªà‡∫ß‡ªÇ‡∫°‡∫á',

        'header2': '2. ‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å‡∫ú‡∫ª‡∫ô‡ªÑ‡∫î‡ªâ‡∫Æ‡∫±‡∫ö‡∫ï‡∫ª‡∫ß‡∫à‡∫¥‡∫á',
        'total_min': '‡ªÄ‡∫ß‡∫•‡∫≤‡∫ó‡∫±‡∫á‡ªù‡∫ª‡∫î (‡∫ô‡∫≤‡∫ó‡∫µ)',
        'total_sec': '‡ªÄ‡∫ß‡∫•‡∫≤‡∫ó‡∫±‡∫á‡ªù‡∫ª‡∫î (‡∫ß‡∫¥‡∫ô‡∫≤‡∫ó‡∫µ)',
        'total_count': '‡∫à‡∫≥‡∫ô‡∫ß‡∫ô‡ªÄ‡∫ó‡∫∑‡ªà‡∫≠ (‡∫Æ‡∫≠‡∫ö)',
        'avg_timesec': '‡ªÄ‡∫ß‡∫•‡∫≤‡∫Æ‡∫≠‡∫ö‡∫ï‡∫ª‡∫ß‡∫à‡∫¥‡∫á (‡∫ß‡∫¥‡∫ô‡∫≤‡∫ó‡∫µ)',
        'avg_timemin': '‡ªÄ‡∫ß‡∫•‡∫≤‡∫Æ‡∫≠‡∫ö‡∫ï‡∫ª‡∫ß‡∫à‡∫¥‡∫á (‡∫ô‡∫≤‡∫ó‡∫µ)',
        'actual_eff': '‡∫õ‡∫∞‡∫™‡∫¥‡∫î‡∫ó‡∫¥‡∫û‡∫≤‡∫ö‡∫ï‡∫ª‡∫ß‡∫à‡∫¥‡∫á (%)',
        'actual_pcs': '‡∫õ‡∫∞‡∫™‡∫¥‡∫î‡∫ó‡∫¥‡∫û‡∫≤‡∫ö‡∫ï‡∫ª‡∫ß‡∫à‡∫¥‡∫á (‡∫ä‡∫¥‡ªâ‡∫ô/‡∫ä‡∫ª‡ªà‡∫ß‡ªÇ‡∫°‡∫á)',

        'header3': '3. ‡∫Ñ‡∫∏‡∫ô‡∫ô‡∫∞‡∫û‡∫≤‡∫ö',
        'pass_qty': '‡∫à‡∫≥‡∫ô‡∫ß‡∫ô‡∫ú‡∫∞‡∫•‡∫¥‡∫î‡∫ï‡∫∞‡∫û‡∫±‡∫ô‡∫ó‡∫µ‡ªà‡ªÑ‡∫î‡ªâ‡∫°‡∫≤‡∫î‡∫ï‡∫∞‡∫ñ‡∫≤‡∫ô (‡∫ä‡∫¥‡ªâ‡∫ô)',
        'fail_qty': '‡∫à‡∫≥‡∫ô‡∫ß‡∫ô‡∫ú‡∫∞‡∫•‡∫¥‡∫î‡∫ï‡∫∞‡∫û‡∫±‡∫ô‡∫ó‡∫µ‡ªà‡∫ö‡ªç‡ªà‡ªÑ‡∫î‡ªâ‡∫°‡∫≤‡∫î‡∫ï‡∫∞‡∫ñ‡∫≤‡∫ô (‡∫ä‡∫¥‡ªâ‡∫ô)',
        'pass_rate': '‡∫≠‡∫±‡∫î‡∫ï‡∫≤‡∫Å‡∫≤‡∫ô‡∫ú‡ªà‡∫≤‡∫ô (%)',
        
        'header4': '4. ‡ªÅ‡∫ú‡∫ô‡∫Å‡∫≤‡∫ô‡∫ù‡∫∂‡∫Å‡∫≠‡∫ª‡∫ö‡∫Æ‡∫ª‡∫°',
        'training_duration': '‡ªÑ‡∫•‡∫ç‡∫∞‡ªÄ‡∫ß‡∫•‡∫≤‡∫Å‡∫≤‡∫ô‡∫ù‡∫∂‡∫Å‡∫≠‡∫ª‡∫ö‡∫Æ‡∫ª‡∫° (‡∫°‡∫∑‡ªâ/‡∫ä‡∫ª‡ªà‡∫ß‡ªÇ‡∫°‡∫á)'
    }
};

// 2. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏†‡∏≤‡∏©‡∏≤
function changeLanguage(lang) {
    // ‡∏î‡∏∂‡∏á Element ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏•‡∏≤‡∏™ lang-text
    const elements = document.querySelectorAll('.lang-text');
    
    elements.forEach(el => {
        const key = el.getAttribute('data-key');
        if (translations[lang] && translations[lang][key]) {
            el.innerText = translations[lang][key];
        }
    });

    // ‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°: ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
    // (‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏™‡πà data-key ‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏°‡∏î‡πâ‡∏ß‡∏¢)
    console.log("Language changed to: " + lang);
}
  
  

function scrollToBottom() {
    // ‡∏î‡∏∂‡∏á Element ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏î‡πâ‡∏ß‡∏¢ ID
    const target = document.getElementById('header4');
    
    if (target) {
        // ‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÑ‡∏õ‡∏ó‡∏µ‡πà Element ‡∏ô‡∏±‡πâ‡∏ô
        target.scrollIntoView({
            behavior: 'smooth', // ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÅ‡∏ö‡∏ö‡∏ô‡∏∏‡πà‡∏°‡∏ô‡∏ß‡∏•
            block: 'start'      // ‡πÉ‡∏´‡πâ‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏ô‡∏Ç‡∏≠‡∏á‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡∏à‡∏≠
        });
    }
}
  
function resetForm() {
    // 1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ID ‡∏Ç‡∏≠‡∏á Input ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á
    const inputs = [
        'samInput', 'effTargetInput', 'totalMin', 
        'totalTime', 'totalCount', 'passQty', 'failQty'
    ];

    // 2. ‡∏•‡∏ö‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô Input ‡∏ó‡∏∏‡∏Å‡∏ä‡πà‡∏≠‡∏á
    inputs.forEach(id => {
        const el = document.getElementById(id);
        if (el) el.value = "";
    });

    // 3. ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÉ‡∏´‡∏°‡πà ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏µ‡πÑ‡∏Æ‡πÑ‡∏•‡∏ó‡πå‡∏´‡∏≤‡∏¢‡πÑ‡∏õ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
    calculateAll();
    
    // 4. ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏™‡∏∏‡∏î (‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠)
    window.scrollTo({ top: 0, behavior: 'smooth' });
}
  

function calculateAll() {
    // --- 1. ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å Input ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô ---
    const sam = parseFloat(document.getElementById('samInput').value) || 0;
    const effTargetInput = parseFloat(document.getElementById('effTargetInput').value) || 0;
    
    const totalMin = parseFloat(document.getElementById('totalMin').value) || 0; 
    const totalTime = parseFloat(document.getElementById('totalTime').value) || 0;
    const totalCount = parseFloat(document.getElementById('totalCount').value) || 0;
    
    const passQty = parseFloat(document.getElementById('passQty').value) || 0;
    const failQty = parseFloat(document.getElementById('failQty').value) || 0;
    const duration = parseInt(document.getElementById('duration').value) || 0;

    // --- 2. ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• ---
    const targetDisplay = document.getElementById('targetDisplay');
    const avgTimeSec = document.getElementById('avgTimeSec');
    const avgTimeMin = document.getElementById('avgTimeMin');
    const actualEffPerc = document.getElementById('actualEffPerc');
    const actualPcs = document.getElementById('actualPcs');
    const passRate = document.getElementById('passRate');

    // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡∏Ñ‡πà‡∏≤‡πÑ‡∏õ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 4
    let currentActualEff = 0; 

    // --- ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ (Target) ---
    if (sam > 0 && effTargetInput > 0) {
        let target = Math.ceil((60 / sam) * (effTargetInput / 100));
        targetDisplay.value = target; // ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÑ‡∏ß‡πâ
        targetDisplay.classList.add("highlight-result");
    } else {
        targetDisplay.value = "";
        targetDisplay.classList.remove("highlight-result");
    }

    // --- ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á (Actual) ---
    if (totalCount > 0 && (totalMin > 0 || totalTime > 0)) {
        let totalSeconds = (totalMin * 60) + totalTime;
        let avgSecValue = totalSeconds / totalCount;
        let avgMinValue = avgSecValue / 60;

        avgTimeSec.value = Math.ceil(avgSecValue);
        avgTimeMin.value = avgMinValue.toFixed(2);
        
        avgTimeSec.classList.add("highlight-result");
        avgTimeMin.classList.add("highlight-result");

        if (sam > 0 && avgMinValue > 0) {
            currentActualEff = Math.ceil((sam / avgMinValue) * 100);
            let pcsActual = Math.ceil(60 / avgMinValue);

            actualEffPerc.value = currentActualEff + " %";
            actualPcs.value = pcsActual.toLocaleString() + " ‡∏ä‡∏¥‡πâ‡∏ô";
            
            actualEffPerc.classList.add("highlight-result");
            actualPcs.classList.add("highlight-result");
        }
    } else {
        avgTimeSec.value = ""; avgTimeMin.value = "";
        actualEffPerc.value = ""; actualPcs.value = "";
        avgTimeSec.classList.remove("highlight-result");
        avgTimeMin.classList.remove("highlight-result");
        actualEffPerc.classList.remove("highlight-result");
        actualPcs.classList.remove("highlight-result");
    }

    // --- ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û (Quality) ---
    const totalQty = passQty + failQty;
    if (totalQty > 0) {
        let rate = Math.ceil((passQty / totalQty) * 100);
        passRate.value = rate + " %";
        passRate.classList.add("highlight-result"); 
    } else {
        passRate.value = "";
        passRate.classList.remove("highlight-result");
    }

    // --- ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 4: ‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å (Training Plan) ---
    // ‡πÉ‡∏ä‡πâ gap ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ (effTargetInput) ‡πÅ‡∏•‡∏∞ ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏à‡∏£‡∏¥‡∏á (currentActualEff)
    const gap = effTargetInput - currentActualEff;
    
    if (duration > 0 && gap > 0) {
        const increment = gap / duration;
        let runningEff = currentActualEff;

        for (let i = 1; i <= 18; i++) {
            const displayElement = document.getElementById('d' + i);
            if (displayElement) {
                if (i <= duration) {
                    runningEff += increment;
                    let roundEff = Math.ceil(runningEff);
                    
                    // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ä‡∏¥‡πâ‡∏ô‡∏á‡∏≤‡∏ô‡∏ï‡πà‡∏≠‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏à‡∏≤‡∏Å Eff ‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ß‡∏±‡∏ô
                    let pcsPlan = 0;
                    if (sam > 0) {
                        pcsPlan = Math.ceil((60 / sam) * (roundEff / 100));
                    }

                    // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö: 52% / 69 ‡∏ä‡∏¥‡πâ‡∏ô/‡∏ä‡∏°.
                    displayElement.value = roundEff + "% ‚û°Ô∏è " + pcsPlan;
                    displayElement.classList.add("highlight-result");
                } else {
                    displayElement.value = "-";
                    displayElement.classList.remove("highlight-result");
                }
            }
        }
    } else {
        // ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• d1-d18 ‡∏´‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö
        for (let i = 1; i <= 18; i++) {
            const el = document.getElementById('d' + i);
            if (el) {
                el.value = "";
                el.classList.remove("highlight-result");
            }
        }
    }
}
</script>
</body>
 <footer style="text-align: center; padding: 20px; color: #888; font-size: 12px; font-family: sans-serif;">
    <hr style="border: 0; border-top: 1px solid #eee; margin-bottom: 10px;">
    <p>¬© CSA Evaluation  | <strong>v1.0.0.0</strong></p>
</footer>
</html>
